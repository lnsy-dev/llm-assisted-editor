class AIGenerated extends HTMLElement {
  connectedCallback(){
    this.text = this.getAttribute('content');
    this.tokens_used = this.getAttribute('tokens-used');
    this.model = this.getAttribute('model');
    this.innerHTML = `
      <div>
        <header>
          This text was generated by ${this.model}. It used ${this.tokens_used} tokens.
        </header>
        <mark-down>${this.text}</mark-down>
        <footer>
          <button id="save_button">Save to Buffer</button>
        </footer>
      </div>
    `

    this.save_button = this.querySelector('#save_button');
    this.save_button.addEventListener('click', (e) => {
      e.preventDefault();
      md_editor.appendText('\n\n' + this.text);
    });
  }
}

customElements.define('ai-generated', AIGenerated)